<ion-header>
  <ion-navbar>
    <ion-title>{{ activeConversation.comment_by_fullname }}</ion-title>

    <ion-buttons right>
      <button ion-button icon-left solid color="primary">
        <ion-icon name="checkmark-circle-outline"></ion-icon>
        Mark Handled
      </button>
    </ion-buttons>
  </ion-navbar>

  <ion-toolbar>
    <ion-segment [(ngModel)]="selectedTab" color="dark">
      <ion-segment-button value="conversation">
        Conversation
      </ion-segment-button>
      <ion-segment-button value="info">
        Info &amp; Notes
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-header>


<ion-content>

  <!-- Swipe to Refresh -->
  <ion-refresher (ionRefresh)="doRefresh($event)" [enabled]="conversationComments">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <!-- When content isn't available' -->
  <div class="page-loading" *ngIf="isLoading && !refresherLoading">
    <img src='assets/brand/loader.gif'>
  </div>

  <!-- When content available -->
  <div *ngIf="!isLoading || refresherLoading" [ngSwitch]="selectedTab">

    <!-- START Conversation Tab -->
    <ion-list no-lines *ngSwitchCase="'conversation'">

      <!-- Sliding Item -->
      <ion-item-sliding 
        *ngFor="let comment of conversationComments">
        
        <!-- The Ion Item -->
        <ion-item text-wrap>
          <ion-avatar item-left>
            <img src="{{ comment.comment_by_photo }}" onError="this.src='assets/user.png';">
          </ion-avatar>

          <h3 class='elipse'>{{ comment.comment_by_fullname }}</h3>
          <p class='username'>@{{ comment.comment_by_username }}</p>
          <p class="message">
            {{ comment.comment_text }}
          </p>

          <ion-note item-right>{{ comment.comment_datetime }}</ion-note>
        </ion-item>

        <!-- Right Sliding Options -->
        <ion-item-options side="right">
          <button ion-button color="danger">
            <ion-icon name="trash"></ion-icon>
            Delete
          </button>
        </ion-item-options>

      </ion-item-sliding>

    </ion-list>
    <!-- END Conversation Tab -->

    <!-- START Info Tab -->
    <div padding *ngSwitchCase="'info'">
      Info content will go here
    </div>
    <!-- END Info Tab -->

  </div>

</ion-content>

<ion-footer *ngIf="selectedTab == 'conversation'">
  <!-- Comment Box Toolbar -->
  <ion-toolbar>
    <ion-buttons left>
      <ion-chip>
        <ion-avatar>
          <img src="{{ activeConversation.comment_by_photo }}" onError="this.src='assets/user.png';">
        </ion-avatar>
        <ion-label>@{{ activeConversation.comment_by_username }}</ion-label>
      </ion-chip>
    </ion-buttons>
    
    <ion-textarea autosize rows="1" placeholder="comment input here"></ion-textarea>

    <ion-buttons right>
      <button ion-button icon-only>
        <ion-icon name="send"></ion-icon>
      </button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>